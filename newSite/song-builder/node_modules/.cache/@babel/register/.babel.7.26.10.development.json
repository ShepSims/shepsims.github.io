{"{\"assumptions\":{},\"sourceRoot\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/tests/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder\",\"filename\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/tests/setup-db.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\nvar _supabaseJs = require(\"@supabase/supabase-js\");\nvar _config = require(\"../config\");\nconst supabase = (0, _supabaseJs.createClient)(_config.SUPABASE_URL, _config.SUPABASE_ANON_KEY);\n\n// SQL for creating the tables if they don't exist\nconst createTablesSQL = `\n-- Create extension for UUID generation if it doesn't exist\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\n-- Create user_settings table if it doesn't exist\nCREATE TABLE IF NOT EXISTS user_settings (\n  id uuid DEFAULT uuid_generate_v4() PRIMARY KEY,\n  user_id uuid NOT NULL,\n  settings jsonb NOT NULL DEFAULT '{}'::jsonb,\n  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  UNIQUE(user_id)\n);\n\n-- Create songs table if it doesn't exist\nCREATE TABLE IF NOT EXISTS songs (\n  id uuid DEFAULT uuid_generate_v4() PRIMARY KEY,\n  user_id uuid NOT NULL,\n  title text NOT NULL,\n  data jsonb NOT NULL,\n  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL\n);\n\n-- Enable Row Level Security\nALTER TABLE IF EXISTS user_settings ENABLE ROW LEVEL SECURITY;\nALTER TABLE IF EXISTS songs ENABLE ROW LEVEL SECURITY;\n\n-- Create policies (wrapped in DO block to handle errors)\nDO $$ \nBEGIN\n  -- User settings policies\n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'user_settings' AND policyname = 'Users can read their own settings'\n  ) THEN\n    CREATE POLICY \"Users can read their own settings\"\n      ON user_settings FOR SELECT\n      USING (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'user_settings' AND policyname = 'Users can update their own settings'\n  ) THEN\n    CREATE POLICY \"Users can update their own settings\"\n      ON user_settings FOR UPDATE\n      USING (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'user_settings' AND policyname = 'Users can insert their own settings'\n  ) THEN\n    CREATE POLICY \"Users can insert their own settings\"\n      ON user_settings FOR INSERT\n      WITH CHECK (auth.uid() = user_id);\n  END IF;\n  \n  -- Songs policies\n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'songs' AND policyname = 'Users can read their own songs'\n  ) THEN\n    CREATE POLICY \"Users can read their own songs\"\n      ON songs FOR SELECT\n      USING (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'songs' AND policyname = 'Users can update their own songs'\n  ) THEN\n    CREATE POLICY \"Users can update their own songs\"\n      ON songs FOR UPDATE\n      USING (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'songs' AND policyname = 'Users can insert their own songs'\n  ) THEN\n    CREATE POLICY \"Users can insert their own songs\"\n      ON songs FOR INSERT\n      WITH CHECK (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'songs' AND policyname = 'Users can delete their own songs'\n  ) THEN\n    CREATE POLICY \"Users can delete their own songs\"\n      ON songs FOR DELETE\n      USING (auth.uid() = user_id);\n  END IF;\n\nEXCEPTION\n  WHEN OTHERS THEN\n    RAISE NOTICE 'Error creating policies: %', SQLERRM;\nEND $$;\n`;\n\n// Split the SQL into separate statements for better error handling\nconst createExtensionSQL = `CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";`;\nconst createUserSettingsTableSQL = `\nCREATE TABLE IF NOT EXISTS user_settings (\n  id uuid DEFAULT uuid_generate_v4() PRIMARY KEY,\n  user_id uuid NOT NULL,\n  settings jsonb NOT NULL DEFAULT '{}'::jsonb,\n  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  UNIQUE(user_id)\n);\n`;\nconst createSongsTableSQL = `\nCREATE TABLE IF NOT EXISTS songs (\n  id uuid DEFAULT uuid_generate_v4() PRIMARY KEY,\n  user_id uuid NOT NULL,\n  title text NOT NULL,\n  data jsonb NOT NULL,\n  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL\n);\n`;\nconst enableRLSSQL = `\nALTER TABLE IF EXISTS user_settings ENABLE ROW LEVEL SECURITY;\nALTER TABLE IF EXISTS songs ENABLE ROW LEVEL SECURITY;\n`;\nasync function setupDatabase() {\n  try {\n    console.log('Creating uuid-ossp extension...');\n    const {\n      error: extensionError\n    } = await supabase.rpc('pgx_exec', {\n      sql: createExtensionSQL\n    });\n    if (extensionError) {\n      console.error('Error creating extension:', extensionError);\n      // Continue anyway, it might already exist\n    }\n    console.log('Creating user_settings table...');\n    const {\n      error: userSettingsError\n    } = await supabase.rpc('pgx_exec', {\n      sql: createUserSettingsTableSQL\n    });\n    if (userSettingsError) {\n      console.error('Error creating user_settings table:', userSettingsError);\n      return {\n        success: false,\n        error: userSettingsError\n      };\n    }\n    console.log('Creating songs table...');\n    const {\n      error: songsError\n    } = await supabase.rpc('pgx_exec', {\n      sql: createSongsTableSQL\n    });\n    if (songsError) {\n      console.error('Error creating songs table:', songsError);\n      return {\n        success: false,\n        error: songsError\n      };\n    }\n    console.log('Enabling Row Level Security...');\n    const {\n      error: rlsError\n    } = await supabase.rpc('pgx_exec', {\n      sql: enableRLSSQL\n    });\n    if (rlsError) {\n      console.error('Error enabling RLS:', rlsError);\n      // Continue anyway\n    }\n    console.log('Database tables created successfully');\n    return {\n      success: true\n    };\n  } catch (err) {\n    console.error('Unexpected error setting up database:', err);\n    return {\n      success: false,\n      error: err\n    };\n  }\n}\n\n// Run the setup if this script is executed directly\nif (require.main === module) {\n  setupDatabase().then(result => {\n    if (result.success) {\n      console.log('Database setup complete');\n    } else {\n      console.error('Database setup failed:', result.error);\n      process.exit(1);\n    }\n  }).catch(err => {\n    console.error('Error in setup process:', err);\n    process.exit(1);\n  });\n}\nvar _default = exports.default = setupDatabase;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3VwYWJhc2VKcyIsInJlcXVpcmUiLCJfY29uZmlnIiwic3VwYWJhc2UiLCJjcmVhdGVDbGllbnQiLCJTVVBBQkFTRV9VUkwiLCJTVVBBQkFTRV9BTk9OX0tFWSIsImNyZWF0ZVRhYmxlc1NRTCIsImNyZWF0ZUV4dGVuc2lvblNRTCIsImNyZWF0ZVVzZXJTZXR0aW5nc1RhYmxlU1FMIiwiY3JlYXRlU29uZ3NUYWJsZVNRTCIsImVuYWJsZVJMU1NRTCIsInNldHVwRGF0YWJhc2UiLCJjb25zb2xlIiwibG9nIiwiZXJyb3IiLCJleHRlbnNpb25FcnJvciIsInJwYyIsInNxbCIsInVzZXJTZXR0aW5nc0Vycm9yIiwic3VjY2VzcyIsInNvbmdzRXJyb3IiLCJybHNFcnJvciIsImVyciIsIm1haW4iLCJtb2R1bGUiLCJ0aGVuIiwicmVzdWx0IiwicHJvY2VzcyIsImV4aXQiLCJjYXRjaCIsIl9kZWZhdWx0IiwiZXhwb3J0cyIsImRlZmF1bHQiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWMvRGVza3RvcC9naXQvc2hlcHNpbXMuZ2l0aHViLmlvL25ld1NpdGUvc29uZy1idWlsZGVyL3Rlc3RzLyIsInNvdXJjZXMiOlsic2V0dXAtZGIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3N1cGFiYXNlLWpzJztcbmltcG9ydCB7IFNVUEFCQVNFX1VSTCwgU1VQQUJBU0VfQU5PTl9LRVkgfSBmcm9tICcuLi9jb25maWcnO1xuXG5jb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChTVVBBQkFTRV9VUkwsIFNVUEFCQVNFX0FOT05fS0VZKTtcblxuLy8gU1FMIGZvciBjcmVhdGluZyB0aGUgdGFibGVzIGlmIHRoZXkgZG9uJ3QgZXhpc3RcbmNvbnN0IGNyZWF0ZVRhYmxlc1NRTCA9IGBcbi0tIENyZWF0ZSBleHRlbnNpb24gZm9yIFVVSUQgZ2VuZXJhdGlvbiBpZiBpdCBkb2Vzbid0IGV4aXN0XG5DUkVBVEUgRVhURU5TSU9OIElGIE5PVCBFWElTVFMgXCJ1dWlkLW9zc3BcIjtcblxuLS0gQ3JlYXRlIHVzZXJfc2V0dGluZ3MgdGFibGUgaWYgaXQgZG9lc24ndCBleGlzdFxuQ1JFQVRFIFRBQkxFIElGIE5PVCBFWElTVFMgdXNlcl9zZXR0aW5ncyAoXG4gIGlkIHV1aWQgREVGQVVMVCB1dWlkX2dlbmVyYXRlX3Y0KCkgUFJJTUFSWSBLRVksXG4gIHVzZXJfaWQgdXVpZCBOT1QgTlVMTCxcbiAgc2V0dGluZ3MganNvbmIgTk9UIE5VTEwgREVGQVVMVCAne30nOjpqc29uYixcbiAgY3JlYXRlZF9hdCB0aW1lc3RhbXAgd2l0aCB0aW1lIHpvbmUgREVGQVVMVCB0aW1lem9uZSgndXRjJzo6dGV4dCwgbm93KCkpIE5PVCBOVUxMLFxuICB1cGRhdGVkX2F0IHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSBERUZBVUxUIHRpbWV6b25lKCd1dGMnOjp0ZXh0LCBub3coKSkgTk9UIE5VTEwsXG4gIFVOSVFVRSh1c2VyX2lkKVxuKTtcblxuLS0gQ3JlYXRlIHNvbmdzIHRhYmxlIGlmIGl0IGRvZXNuJ3QgZXhpc3RcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHNvbmdzIChcbiAgaWQgdXVpZCBERUZBVUxUIHV1aWRfZ2VuZXJhdGVfdjQoKSBQUklNQVJZIEtFWSxcbiAgdXNlcl9pZCB1dWlkIE5PVCBOVUxMLFxuICB0aXRsZSB0ZXh0IE5PVCBOVUxMLFxuICBkYXRhIGpzb25iIE5PVCBOVUxMLFxuICBjcmVhdGVkX2F0IHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSBERUZBVUxUIHRpbWV6b25lKCd1dGMnOjp0ZXh0LCBub3coKSkgTk9UIE5VTEwsXG4gIHVwZGF0ZWRfYXQgdGltZXN0YW1wIHdpdGggdGltZSB6b25lIERFRkFVTFQgdGltZXpvbmUoJ3V0Yyc6OnRleHQsIG5vdygpKSBOT1QgTlVMTFxuKTtcblxuLS0gRW5hYmxlIFJvdyBMZXZlbCBTZWN1cml0eVxuQUxURVIgVEFCTEUgSUYgRVhJU1RTIHVzZXJfc2V0dGluZ3MgRU5BQkxFIFJPVyBMRVZFTCBTRUNVUklUWTtcbkFMVEVSIFRBQkxFIElGIEVYSVNUUyBzb25ncyBFTkFCTEUgUk9XIExFVkVMIFNFQ1VSSVRZO1xuXG4tLSBDcmVhdGUgcG9saWNpZXMgKHdyYXBwZWQgaW4gRE8gYmxvY2sgdG8gaGFuZGxlIGVycm9ycylcbkRPICQkIFxuQkVHSU5cbiAgLS0gVXNlciBzZXR0aW5ncyBwb2xpY2llc1xuICBJRiBOT1QgRVhJU1RTIChcbiAgICBTRUxFQ1QgRlJPTSBwZ19wb2xpY2llcyBXSEVSRSB0YWJsZW5hbWUgPSAndXNlcl9zZXR0aW5ncycgQU5EIHBvbGljeW5hbWUgPSAnVXNlcnMgY2FuIHJlYWQgdGhlaXIgb3duIHNldHRpbmdzJ1xuICApIFRIRU5cbiAgICBDUkVBVEUgUE9MSUNZIFwiVXNlcnMgY2FuIHJlYWQgdGhlaXIgb3duIHNldHRpbmdzXCJcbiAgICAgIE9OIHVzZXJfc2V0dGluZ3MgRk9SIFNFTEVDVFxuICAgICAgVVNJTkcgKGF1dGgudWlkKCkgPSB1c2VyX2lkKTtcbiAgRU5EIElGO1xuICBcbiAgSUYgTk9UIEVYSVNUUyAoXG4gICAgU0VMRUNUIEZST00gcGdfcG9saWNpZXMgV0hFUkUgdGFibGVuYW1lID0gJ3VzZXJfc2V0dGluZ3MnIEFORCBwb2xpY3luYW1lID0gJ1VzZXJzIGNhbiB1cGRhdGUgdGhlaXIgb3duIHNldHRpbmdzJ1xuICApIFRIRU5cbiAgICBDUkVBVEUgUE9MSUNZIFwiVXNlcnMgY2FuIHVwZGF0ZSB0aGVpciBvd24gc2V0dGluZ3NcIlxuICAgICAgT04gdXNlcl9zZXR0aW5ncyBGT1IgVVBEQVRFXG4gICAgICBVU0lORyAoYXV0aC51aWQoKSA9IHVzZXJfaWQpO1xuICBFTkQgSUY7XG4gIFxuICBJRiBOT1QgRVhJU1RTIChcbiAgICBTRUxFQ1QgRlJPTSBwZ19wb2xpY2llcyBXSEVSRSB0YWJsZW5hbWUgPSAndXNlcl9zZXR0aW5ncycgQU5EIHBvbGljeW5hbWUgPSAnVXNlcnMgY2FuIGluc2VydCB0aGVpciBvd24gc2V0dGluZ3MnXG4gICkgVEhFTlxuICAgIENSRUFURSBQT0xJQ1kgXCJVc2VycyBjYW4gaW5zZXJ0IHRoZWlyIG93biBzZXR0aW5nc1wiXG4gICAgICBPTiB1c2VyX3NldHRpbmdzIEZPUiBJTlNFUlRcbiAgICAgIFdJVEggQ0hFQ0sgKGF1dGgudWlkKCkgPSB1c2VyX2lkKTtcbiAgRU5EIElGO1xuICBcbiAgLS0gU29uZ3MgcG9saWNpZXNcbiAgSUYgTk9UIEVYSVNUUyAoXG4gICAgU0VMRUNUIEZST00gcGdfcG9saWNpZXMgV0hFUkUgdGFibGVuYW1lID0gJ3NvbmdzJyBBTkQgcG9saWN5bmFtZSA9ICdVc2VycyBjYW4gcmVhZCB0aGVpciBvd24gc29uZ3MnXG4gICkgVEhFTlxuICAgIENSRUFURSBQT0xJQ1kgXCJVc2VycyBjYW4gcmVhZCB0aGVpciBvd24gc29uZ3NcIlxuICAgICAgT04gc29uZ3MgRk9SIFNFTEVDVFxuICAgICAgVVNJTkcgKGF1dGgudWlkKCkgPSB1c2VyX2lkKTtcbiAgRU5EIElGO1xuICBcbiAgSUYgTk9UIEVYSVNUUyAoXG4gICAgU0VMRUNUIEZST00gcGdfcG9saWNpZXMgV0hFUkUgdGFibGVuYW1lID0gJ3NvbmdzJyBBTkQgcG9saWN5bmFtZSA9ICdVc2VycyBjYW4gdXBkYXRlIHRoZWlyIG93biBzb25ncydcbiAgKSBUSEVOXG4gICAgQ1JFQVRFIFBPTElDWSBcIlVzZXJzIGNhbiB1cGRhdGUgdGhlaXIgb3duIHNvbmdzXCJcbiAgICAgIE9OIHNvbmdzIEZPUiBVUERBVEVcbiAgICAgIFVTSU5HIChhdXRoLnVpZCgpID0gdXNlcl9pZCk7XG4gIEVORCBJRjtcbiAgXG4gIElGIE5PVCBFWElTVFMgKFxuICAgIFNFTEVDVCBGUk9NIHBnX3BvbGljaWVzIFdIRVJFIHRhYmxlbmFtZSA9ICdzb25ncycgQU5EIHBvbGljeW5hbWUgPSAnVXNlcnMgY2FuIGluc2VydCB0aGVpciBvd24gc29uZ3MnXG4gICkgVEhFTlxuICAgIENSRUFURSBQT0xJQ1kgXCJVc2VycyBjYW4gaW5zZXJ0IHRoZWlyIG93biBzb25nc1wiXG4gICAgICBPTiBzb25ncyBGT1IgSU5TRVJUXG4gICAgICBXSVRIIENIRUNLIChhdXRoLnVpZCgpID0gdXNlcl9pZCk7XG4gIEVORCBJRjtcbiAgXG4gIElGIE5PVCBFWElTVFMgKFxuICAgIFNFTEVDVCBGUk9NIHBnX3BvbGljaWVzIFdIRVJFIHRhYmxlbmFtZSA9ICdzb25ncycgQU5EIHBvbGljeW5hbWUgPSAnVXNlcnMgY2FuIGRlbGV0ZSB0aGVpciBvd24gc29uZ3MnXG4gICkgVEhFTlxuICAgIENSRUFURSBQT0xJQ1kgXCJVc2VycyBjYW4gZGVsZXRlIHRoZWlyIG93biBzb25nc1wiXG4gICAgICBPTiBzb25ncyBGT1IgREVMRVRFXG4gICAgICBVU0lORyAoYXV0aC51aWQoKSA9IHVzZXJfaWQpO1xuICBFTkQgSUY7XG5cbkVYQ0VQVElPTlxuICBXSEVOIE9USEVSUyBUSEVOXG4gICAgUkFJU0UgTk9USUNFICdFcnJvciBjcmVhdGluZyBwb2xpY2llczogJScsIFNRTEVSUk07XG5FTkQgJCQ7XG5gO1xuXG4vLyBTcGxpdCB0aGUgU1FMIGludG8gc2VwYXJhdGUgc3RhdGVtZW50cyBmb3IgYmV0dGVyIGVycm9yIGhhbmRsaW5nXG5jb25zdCBjcmVhdGVFeHRlbnNpb25TUUwgPSBgQ1JFQVRFIEVYVEVOU0lPTiBJRiBOT1QgRVhJU1RTIFwidXVpZC1vc3NwXCI7YDtcblxuY29uc3QgY3JlYXRlVXNlclNldHRpbmdzVGFibGVTUUwgPSBgXG5DUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyB1c2VyX3NldHRpbmdzIChcbiAgaWQgdXVpZCBERUZBVUxUIHV1aWRfZ2VuZXJhdGVfdjQoKSBQUklNQVJZIEtFWSxcbiAgdXNlcl9pZCB1dWlkIE5PVCBOVUxMLFxuICBzZXR0aW5ncyBqc29uYiBOT1QgTlVMTCBERUZBVUxUICd7fSc6Ompzb25iLFxuICBjcmVhdGVkX2F0IHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSBERUZBVUxUIHRpbWV6b25lKCd1dGMnOjp0ZXh0LCBub3coKSkgTk9UIE5VTEwsXG4gIHVwZGF0ZWRfYXQgdGltZXN0YW1wIHdpdGggdGltZSB6b25lIERFRkFVTFQgdGltZXpvbmUoJ3V0Yyc6OnRleHQsIG5vdygpKSBOT1QgTlVMTCxcbiAgVU5JUVVFKHVzZXJfaWQpXG4pO1xuYDtcblxuY29uc3QgY3JlYXRlU29uZ3NUYWJsZVNRTCA9IGBcbkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIHNvbmdzIChcbiAgaWQgdXVpZCBERUZBVUxUIHV1aWRfZ2VuZXJhdGVfdjQoKSBQUklNQVJZIEtFWSxcbiAgdXNlcl9pZCB1dWlkIE5PVCBOVUxMLFxuICB0aXRsZSB0ZXh0IE5PVCBOVUxMLFxuICBkYXRhIGpzb25iIE5PVCBOVUxMLFxuICBjcmVhdGVkX2F0IHRpbWVzdGFtcCB3aXRoIHRpbWUgem9uZSBERUZBVUxUIHRpbWV6b25lKCd1dGMnOjp0ZXh0LCBub3coKSkgTk9UIE5VTEwsXG4gIHVwZGF0ZWRfYXQgdGltZXN0YW1wIHdpdGggdGltZSB6b25lIERFRkFVTFQgdGltZXpvbmUoJ3V0Yyc6OnRleHQsIG5vdygpKSBOT1QgTlVMTFxuKTtcbmA7XG5cbmNvbnN0IGVuYWJsZVJMU1NRTCA9IGBcbkFMVEVSIFRBQkxFIElGIEVYSVNUUyB1c2VyX3NldHRpbmdzIEVOQUJMRSBST1cgTEVWRUwgU0VDVVJJVFk7XG5BTFRFUiBUQUJMRSBJRiBFWElTVFMgc29uZ3MgRU5BQkxFIFJPVyBMRVZFTCBTRUNVUklUWTtcbmA7XG5cbmFzeW5jIGZ1bmN0aW9uIHNldHVwRGF0YWJhc2UoKSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIHV1aWQtb3NzcCBleHRlbnNpb24uLi4nKTtcbiAgICBjb25zdCB7IGVycm9yOiBleHRlbnNpb25FcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdwZ3hfZXhlYycsIHsgc3FsOiBjcmVhdGVFeHRlbnNpb25TUUwgfSk7XG4gICAgaWYgKGV4dGVuc2lvbkVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjcmVhdGluZyBleHRlbnNpb246JywgZXh0ZW5zaW9uRXJyb3IpO1xuICAgICAgLy8gQ29udGludWUgYW55d2F5LCBpdCBtaWdodCBhbHJlYWR5IGV4aXN0XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coJ0NyZWF0aW5nIHVzZXJfc2V0dGluZ3MgdGFibGUuLi4nKTtcbiAgICBjb25zdCB7IGVycm9yOiB1c2VyU2V0dGluZ3NFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UucnBjKCdwZ3hfZXhlYycsIHsgc3FsOiBjcmVhdGVVc2VyU2V0dGluZ3NUYWJsZVNRTCB9KTtcbiAgICBpZiAodXNlclNldHRpbmdzRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNyZWF0aW5nIHVzZXJfc2V0dGluZ3MgdGFibGU6JywgdXNlclNldHRpbmdzRXJyb3IpO1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiB1c2VyU2V0dGluZ3NFcnJvciB9O1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKCdDcmVhdGluZyBzb25ncyB0YWJsZS4uLicpO1xuICAgIGNvbnN0IHsgZXJyb3I6IHNvbmdzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygncGd4X2V4ZWMnLCB7IHNxbDogY3JlYXRlU29uZ3NUYWJsZVNRTCB9KTtcbiAgICBpZiAoc29uZ3NFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY3JlYXRpbmcgc29uZ3MgdGFibGU6Jywgc29uZ3NFcnJvcik7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IHNvbmdzRXJyb3IgfTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZygnRW5hYmxpbmcgUm93IExldmVsIFNlY3VyaXR5Li4uJyk7XG4gICAgY29uc3QgeyBlcnJvcjogcmxzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLnJwYygncGd4X2V4ZWMnLCB7IHNxbDogZW5hYmxlUkxTU1FMIH0pO1xuICAgIGlmIChybHNFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW5hYmxpbmcgUkxTOicsIHJsc0Vycm9yKTtcbiAgICAgIC8vIENvbnRpbnVlIGFueXdheVxuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgdGFibGVzIGNyZWF0ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogdHJ1ZSB9O1xuICB9IGNhdGNoIChlcnIpIHtcbiAgICBjb25zb2xlLmVycm9yKCdVbmV4cGVjdGVkIGVycm9yIHNldHRpbmcgdXAgZGF0YWJhc2U6JywgZXJyKTtcbiAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IGVyciB9O1xuICB9XG59XG5cbi8vIFJ1biB0aGUgc2V0dXAgaWYgdGhpcyBzY3JpcHQgaXMgZXhlY3V0ZWQgZGlyZWN0bHlcbmlmIChyZXF1aXJlLm1haW4gPT09IG1vZHVsZSkge1xuICBzZXR1cERhdGFiYXNlKClcbiAgICAudGhlbihyZXN1bHQgPT4ge1xuICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdEYXRhYmFzZSBzZXR1cCBjb21wbGV0ZScpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignRGF0YWJhc2Ugc2V0dXAgZmFpbGVkOicsIHJlc3VsdC5lcnJvcik7XG4gICAgICAgIHByb2Nlc3MuZXhpdCgxKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4ge1xuICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgaW4gc2V0dXAgcHJvY2VzczonLCBlcnIpO1xuICAgICAgcHJvY2Vzcy5leGl0KDEpO1xuICAgIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBzZXR1cERhdGFiYXNlOyAiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQUFBLFdBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUVBLE1BQU1FLFFBQVEsR0FBRyxJ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","map":{"version":3,"names":["_supabaseJs","require","_config","supabase","createClient","SUPABASE_URL","SUPABASE_ANON_KEY","createTablesSQL","createExtensionSQL","createUserSettingsTableSQL","createSongsTableSQL","enableRLSSQL","setupDatabase","console","log","error","extensionError","rpc","sql","userSettingsError","success","songsError","rlsError","err","main","module","then","result","process","exit","catch","_default","exports","default"],"sourceRoot":"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/tests/","sources":["setup-db.js"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\nimport { SUPABASE_URL, SUPABASE_ANON_KEY } from '../config';\n\nconst supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);\n\n// SQL for creating the tables if they don't exist\nconst createTablesSQL = `\n-- Create extension for UUID generation if it doesn't exist\nCREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";\n\n-- Create user_settings table if it doesn't exist\nCREATE TABLE IF NOT EXISTS user_settings (\n  id uuid DEFAULT uuid_generate_v4() PRIMARY KEY,\n  user_id uuid NOT NULL,\n  settings jsonb NOT NULL DEFAULT '{}'::jsonb,\n  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  UNIQUE(user_id)\n);\n\n-- Create songs table if it doesn't exist\nCREATE TABLE IF NOT EXISTS songs (\n  id uuid DEFAULT uuid_generate_v4() PRIMARY KEY,\n  user_id uuid NOT NULL,\n  title text NOT NULL,\n  data jsonb NOT NULL,\n  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL\n);\n\n-- Enable Row Level Security\nALTER TABLE IF EXISTS user_settings ENABLE ROW LEVEL SECURITY;\nALTER TABLE IF EXISTS songs ENABLE ROW LEVEL SECURITY;\n\n-- Create policies (wrapped in DO block to handle errors)\nDO $$ \nBEGIN\n  -- User settings policies\n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'user_settings' AND policyname = 'Users can read their own settings'\n  ) THEN\n    CREATE POLICY \"Users can read their own settings\"\n      ON user_settings FOR SELECT\n      USING (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'user_settings' AND policyname = 'Users can update their own settings'\n  ) THEN\n    CREATE POLICY \"Users can update their own settings\"\n      ON user_settings FOR UPDATE\n      USING (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'user_settings' AND policyname = 'Users can insert their own settings'\n  ) THEN\n    CREATE POLICY \"Users can insert their own settings\"\n      ON user_settings FOR INSERT\n      WITH CHECK (auth.uid() = user_id);\n  END IF;\n  \n  -- Songs policies\n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'songs' AND policyname = 'Users can read their own songs'\n  ) THEN\n    CREATE POLICY \"Users can read their own songs\"\n      ON songs FOR SELECT\n      USING (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'songs' AND policyname = 'Users can update their own songs'\n  ) THEN\n    CREATE POLICY \"Users can update their own songs\"\n      ON songs FOR UPDATE\n      USING (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'songs' AND policyname = 'Users can insert their own songs'\n  ) THEN\n    CREATE POLICY \"Users can insert their own songs\"\n      ON songs FOR INSERT\n      WITH CHECK (auth.uid() = user_id);\n  END IF;\n  \n  IF NOT EXISTS (\n    SELECT FROM pg_policies WHERE tablename = 'songs' AND policyname = 'Users can delete their own songs'\n  ) THEN\n    CREATE POLICY \"Users can delete their own songs\"\n      ON songs FOR DELETE\n      USING (auth.uid() = user_id);\n  END IF;\n\nEXCEPTION\n  WHEN OTHERS THEN\n    RAISE NOTICE 'Error creating policies: %', SQLERRM;\nEND $$;\n`;\n\n// Split the SQL into separate statements for better error handling\nconst createExtensionSQL = `CREATE EXTENSION IF NOT EXISTS \"uuid-ossp\";`;\n\nconst createUserSettingsTableSQL = `\nCREATE TABLE IF NOT EXISTS user_settings (\n  id uuid DEFAULT uuid_generate_v4() PRIMARY KEY,\n  user_id uuid NOT NULL,\n  settings jsonb NOT NULL DEFAULT '{}'::jsonb,\n  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  UNIQUE(user_id)\n);\n`;\n\nconst createSongsTableSQL = `\nCREATE TABLE IF NOT EXISTS songs (\n  id uuid DEFAULT uuid_generate_v4() PRIMARY KEY,\n  user_id uuid NOT NULL,\n  title text NOT NULL,\n  data jsonb NOT NULL,\n  created_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL,\n  updated_at timestamp with time zone DEFAULT timezone('utc'::text, now()) NOT NULL\n);\n`;\n\nconst enableRLSSQL = `\nALTER TABLE IF EXISTS user_settings ENABLE ROW LEVEL SECURITY;\nALTER TABLE IF EXISTS songs ENABLE ROW LEVEL SECURITY;\n`;\n\nasync function setupDatabase() {\n  try {\n    console.log('Creating uuid-ossp extension...');\n    const { error: extensionError } = await supabase.rpc('pgx_exec', { sql: createExtensionSQL });\n    if (extensionError) {\n      console.error('Error creating extension:', extensionError);\n      // Continue anyway, it might already exist\n    }\n\n    console.log('Creating user_settings table...');\n    const { error: userSettingsError } = await supabase.rpc('pgx_exec', { sql: createUserSettingsTableSQL });\n    if (userSettingsError) {\n      console.error('Error creating user_settings table:', userSettingsError);\n      return { success: false, error: userSettingsError };\n    }\n\n    console.log('Creating songs table...');\n    const { error: songsError } = await supabase.rpc('pgx_exec', { sql: createSongsTableSQL });\n    if (songsError) {\n      console.error('Error creating songs table:', songsError);\n      return { success: false, error: songsError };\n    }\n\n    console.log('Enabling Row Level Security...');\n    const { error: rlsError } = await supabase.rpc('pgx_exec', { sql: enableRLSSQL });\n    if (rlsError) {\n      console.error('Error enabling RLS:', rlsError);\n      // Continue anyway\n    }\n    \n    console.log('Database tables created successfully');\n    return { success: true };\n  } catch (err) {\n    console.error('Unexpected error setting up database:', err);\n    return { success: false, error: err };\n  }\n}\n\n// Run the setup if this script is executed directly\nif (require.main === module) {\n  setupDatabase()\n    .then(result => {\n      if (result.success) {\n        console.log('Database setup complete');\n      } else {\n        console.error('Database setup failed:', result.error);\n        process.exit(1);\n      }\n    })\n    .catch(err => {\n      console.error('Error in setup process:', err);\n      process.exit(1);\n    });\n}\n\nexport default setupDatabase; "],"mappings":";;;;;;AAAA,IAAAA,WAAA,GAAAC,OAAA;AACA,IAAAC,OAAA,GAAAD,OAAA;AAEA,MAAME,QAAQ,GAAG,IAAAC,wBAAY,EAACC,oBAAY,EAAEC,yBAAiB,CAAC;;AAE9D;AACA,MAAMC,eAAe,GAAG;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA,MAAMC,kBAAkB,GAAG,6CAA6C;AAExE,MAAMC,0BAA0B,GAAG;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,mBAAmB,GAAG;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AAED,MAAMC,YAAY,GAAG;AACrB;AACA;AACA,CAAC;AAED,eAAeC,aAAaA,CAAA,EAAG;EAC7B,IAAI;IACFC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;IAC9C,MAAM;MAAEC,KAAK,EAAEC;IAAe,CAAC,GAAG,MAAMb,QAAQ,CAACc,GAAG,CAAC,UAAU,EAAE;MAAEC,GAAG,EAAEV;IAAmB,CAAC,CAAC;IAC7F,IAAIQ,cAAc,EAAE;MAClBH,OAAO,CAACE,KAAK,CAAC,2BAA2B,EAAEC,cAAc,CAAC;MAC1D;IACF;IAEAH,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC;IAC9C,MAAM;MAAEC,KAAK,EAAEI;IAAkB,CAAC,GAAG,MAAMhB,QAAQ,CAACc,GAAG,CAAC,UAAU,EAAE;MAAEC,GAAG,EAAET;IAA2B,CAAC,CAAC;IACxG,IAAIU,iBAAiB,EAAE;MACrBN,OAAO,CAACE,KAAK,CAAC,qCAAqC,EAAEI,iBAAiB,CAAC;MACvE,OAAO;QAAEC,OAAO,EAAE,KAAK;QAAEL,KAAK,EAAEI;MAAkB,CAAC;IACrD;IAEAN,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACtC,MAAM;MAAEC,KAAK,EAAEM;IAAW,CAAC,GAAG,MAAMlB,QAAQ,CAACc,GAAG,CAAC,UAAU,EAAE;MAAEC,GAAG,EAAER;IAAoB,CAAC,CAAC;IAC1F,IAAIW,UAAU,EAAE;MACdR,OAAO,CAACE,KAAK,CAAC,6BAA6B,EAAEM,UAAU,CAAC;MACxD,OAAO;QAAED,OAAO,EAAE,KAAK;QAAEL,KAAK,EAAEM;MAAW,CAAC;IAC9C;IAEAR,OAAO,CAACC,GAAG,CAAC,gCAAgC,CAAC;IAC7C,MAAM;MAAEC,KAAK,EAAEO;IAAS,CAAC,GAAG,MAAMnB,QAAQ,CAACc,GAAG,CAAC,UAAU,EAAE;MAAEC,GAAG,EAAEP;IAAa,CAAC,CAAC;IACjF,IAAIW,QAAQ,EAAE;MACZT,OAAO,CAACE,KAAK,CAAC,qBAAqB,EAAEO,QAAQ,CAAC;MAC9C;IACF;IAEAT,OAAO,CAACC,GAAG,CAAC,sCAAsC,CAAC;IACnD,OAAO;MAAEM,OAAO,EAAE;IAAK,CAAC;EAC1B,CAAC,CAAC,OAAOG,GAAG,EAAE;IACZV,OAAO,CAACE,KAAK,CAAC,uCAAuC,EAAEQ,GAAG,CAAC;IAC3D,OAAO;MAAEH,OAAO,EAAE,KAAK;MAAEL,KAAK,EAAEQ;IAAI,CAAC;EACvC;AACF;;AAEA;AACA,IAAItB,OAAO,CAACuB,IAAI,KAAKC,MAAM,EAAE;EAC3Bb,aAAa,CAAC,CAAC,CACZc,IAAI,CAACC,MAAM,IAAI;IACd,IAAIA,MAAM,CAACP,OAAO,EAAE;MAClBP,OAAO,CAACC,GAAG,CAAC,yBAAyB,CAAC;IACxC,CAAC,MAAM;MACLD,OAAO,CAACE,KAAK,CAAC,wBAAwB,EAAEY,MAAM,CAACZ,KAAK,CAAC;MACrDa,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;IACjB;EACF,CAAC,CAAC,CACDC,KAAK,CAACP,GAAG,IAAI;IACZV,OAAO,CAACE,KAAK,CAAC,yBAAyB,EAAEQ,GAAG,CAAC;IAC7CK,OAAO,CAACC,IAAI,CAAC,CAAC,CAAC;EACjB,CAAC,CAAC;AACN;AAAC,IAAAE,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEcrB,aAAa","ignoreList":[]}},"mtime":1744415041781},"{\"assumptions\":{},\"sourceRoot\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/\",\"caller\":{\"name\":\"@babel/register\"},\"cwd\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder\",\"filename\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/config.js\",\"targets\":{},\"cloneInputAst\":true,\"babelrc\":false,\"configFile\":false,\"browserslistConfigFile\":false,\"passPerPreset\":false,\"envName\":\"development\",\"root\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder\",\"rootMode\":\"root\",\"plugins\":[{\"key\":\"transform-duplicate-named-capturing-groups-regex\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-regexp-modifiers\",\"visitor\":{\"RegExpLiteral\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$2\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$3\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$4\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$5\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$6\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$7\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$8\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$9\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$10\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$11\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-export-namespace-from\",\"visitor\":{\"ExportNamedDeclaration\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-modules-commonjs\",\"visitor\":{\"Program\":{\"exit\":[null]},\"_exploded\":true,\"CallExpression\":{\"enter\":[null]},\"ImportExpression\":{\"enter\":[null]},\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"transform-dynamic-import\",\"visitor\":{\"Program\":{\"enter\":[null]},\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$15\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]},{\"key\":\"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/node_modules/@babel/preset-env/lib/index.js$16\",\"visitor\":{\"_exploded\":true,\"_verified\":true},\"options\":{\"spec\":false,\"useBuiltIns\":false},\"externalDependencies\":[]}],\"presets\":[]}:7.26.10:development":{"value":{"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.SUPABASE_URL = exports.SUPABASE_ANON_KEY = void 0;\nconst SUPABASE_URL = exports.SUPABASE_URL = 'https://arjepkzollnkwhidudtp.supabase.co';\n\n// To find your anon key:\n// 1. Go to your Supabase project dashboard (https://app.supabase.com)\n// 2. Click on \"Settings\" in the left sidebar\n// 3. Click on \"API\" under Project Settings\n// 4. Copy the \"anon public\" key (under Project API keys)\nconst SUPABASE_ANON_KEY = exports.SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyamVwa3pvbGxua3doaWR1ZHRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTY5OTUxNDIsImV4cCI6MjAzMjU3MTE0Mn0.E8-Tms9P4RRpDWe09hhSGrh1mZjdR8gCGWBwKP6QxqI';\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTVVBBQkFTRV9VUkwiLCJleHBvcnRzIiwiU1VQQUJBU0VfQU5PTl9LRVkiXSwic291cmNlUm9vdCI6Ii9Vc2Vycy9tYWMvRGVza3RvcC9naXQvc2hlcHNpbXMuZ2l0aHViLmlvL25ld1NpdGUvc29uZy1idWlsZGVyLyIsInNvdXJjZXMiOlsiY29uZmlnLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFNVUEFCQVNFX1VSTCA9ICdodHRwczovL2FyamVwa3pvbGxua3doaWR1ZHRwLnN1cGFiYXNlLmNvJztcblxuLy8gVG8gZmluZCB5b3VyIGFub24ga2V5OlxuLy8gMS4gR28gdG8geW91ciBTdXBhYmFzZSBwcm9qZWN0IGRhc2hib2FyZCAoaHR0cHM6Ly9hcHAuc3VwYWJhc2UuY29tKVxuLy8gMi4gQ2xpY2sgb24gXCJTZXR0aW5nc1wiIGluIHRoZSBsZWZ0IHNpZGViYXJcbi8vIDMuIENsaWNrIG9uIFwiQVBJXCIgdW5kZXIgUHJvamVjdCBTZXR0aW5nc1xuLy8gNC4gQ29weSB0aGUgXCJhbm9uIHB1YmxpY1wiIGtleSAodW5kZXIgUHJvamVjdCBBUEkga2V5cylcbmNvbnN0IFNVUEFCQVNFX0FOT05fS0VZID0gJ2V5SmhiR2NpT2lKSVV6STFOaUlzSW5SNWNDSTZJa3BYVkNKOS5leUpwYzNNaU9pSnpkWEJoWW1GelpTSXNJbkpsWmlJNkltRnlhbVZ3YTNwdmJHeHVhM2RvYVdSMVpIUndJaXdpY205c1pTSTZJbUZ1YjI0aUxDSnBZWFFpT2pFM01UWTVPVFV4TkRJc0ltVjRjQ0k2TWpBek1qVTNNVEUwTW4wLkU4LVRtczlQNFJScERXZTA5aGhTR3JoMW1aamRSOGdDR1dCd0tQNlF4cUknO1xuXG5leHBvcnQgeyBTVVBBQkFTRV9VUkwsIFNVUEFCQVNFX0FOT05fS0VZIH07ICJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsTUFBTUEsWUFBWSxHQUFBQyxPQUFBLENBQUFELFlBQUEsR0FBRywwQ0FBMEM7O0FBRS9EO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNRSxpQkFBaUIsR0FBQUQsT0FBQSxDQUFBQyxpQkFBQSxHQUFHLGtOQUFrTiIsImlnbm9yZUxpc3QiOltdfQ==","map":{"version":3,"names":["SUPABASE_URL","exports","SUPABASE_ANON_KEY"],"sourceRoot":"/Users/mac/Desktop/git/shepsims.github.io/newSite/song-builder/","sources":["config.js"],"sourcesContent":["const SUPABASE_URL = 'https://arjepkzollnkwhidudtp.supabase.co';\n\n// To find your anon key:\n// 1. Go to your Supabase project dashboard (https://app.supabase.com)\n// 2. Click on \"Settings\" in the left sidebar\n// 3. Click on \"API\" under Project Settings\n// 4. Copy the \"anon public\" key (under Project API keys)\nconst SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImFyamVwa3pvbGxua3doaWR1ZHRwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTY5OTUxNDIsImV4cCI6MjAzMjU3MTE0Mn0.E8-Tms9P4RRpDWe09hhSGrh1mZjdR8gCGWBwKP6QxqI';\n\nexport { SUPABASE_URL, SUPABASE_ANON_KEY }; "],"mappings":";;;;;;AAAA,MAAMA,YAAY,GAAAC,OAAA,CAAAD,YAAA,GAAG,0CAA0C;;AAE/D;AACA;AACA;AACA;AACA;AACA,MAAME,iBAAiB,GAAAD,OAAA,CAAAC,iBAAA,GAAG,kNAAkN","ignoreList":[]}},"mtime":1744414942011}}